<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

<style>
.formRegister {margin-top: 10%;}
</style>

<div class="container formRegister">
    <div class="row">
        <div class="offset-4 col-6 mt-5">
            <h1>Nome do Game</h1>
        </div>
    </div>
        <div class="row">
            <div class="offset-4 col-3">
                    <label>Nome deJogador</label>
                    <div class="form-element">
                        <input
                            autofocus="true"
                            type="text"
                            name="username"
                        >
                           <%# O nome de usuário deve ter no mínimo 4 caracteres!
                            O nome de usuário não pode exceder 24 caracteres!
                            O nome de jogador contém caracteres inválidos.
                            O nome de usuário não pode conter apenas números.
                            Este nome de jogador já foi registrado.
                            Caractere inválido no nome de usuário. Por favor, tente um nome sem caracteres
                            especiais. %>
                    <label>Senha</label>
                    <div class="form-element">
                        <input type="password" name="password">
                        <%# A senha deve ter pelo menos 4 caracteres! %>
                    <label>E-Mail</label>
                    <div class="form-element">
                        <input type="email" name="email" required>
                        <%# Por favor, insira um endereço de e-mail válido. %>
                    </div>
                    <label>Origem</label>
                    <div class="form-element mt-2 mb-3">
                        <input id="War" type="radio" name="origin" value="War">
                        <label for="War">Guerra</label>
                        <input id="Researcher" type="radio" name="origin" value="Researcher" checked>
                        <label for="Researcher">Pesquisador</label>
                        <input id="Magic" type="radio" name="origin" value="Magic">
                        <label for="Magic">Mágico</label>
                    </div>
                    <div class="terms">
                            <input type="checkbox" name="accept_terms">
                             <span>
                                Eu aceito os
                                <a href="linkTermos" target="_blank">Termos e Condições</a> e a
                                <a href="linkTermos" target="_blank">Política de Privacidade deDados</a>.
                            </span>
                            <%# É preciso aceitar os termos de uso. %>
                    </div>
                    <div class="d-flex justify-content-center mt-4">
                        <button onclick="register()" class="btn btn-success">Registrar</button>
                    </div>
            </div>
        </div>
        </div>

<script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous"></script>
<script>

    function register() {
        let username = $('input[name="username"]').val()
        let email = $('input[name="email"]').val()
        let password = $('input[name="password"]').val()
        let origin = $('input[name="origin"]:checked').val()

         let dataUser = {
            user_name: username,
            email: email,
            password: password,
            origin: origin
         }

         $.ajax({
            type: "POST",
            url: "/create_user",
            data: dataUser,
            dataType: "json",
            success: function (response) {
                console.log(response)
            }
         }).done(window.location.href = `/home/${dataUser.user_name}`)
     }


</script>

